<!DOCTYPE html><html lang=en><meta http-equiv=Content-Type content="text/html;charset=utf-8"> <meta http-equiv=X-UA-Compatible content="IE=edge"> <meta name=viewport content="width=device-width, initial-scale=1"><title>Lab 8: Floating Point examples</title><meta name=description content="Lab 8: Floating Point examples"> <link rel=canonical href=https://checkoway.net/teaching/cs210/2021-fall/labs/fp.html> <link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.9.0/katex.min.css integrity=sha384-TEMocfGvRuD1rIAacqrknm5BQZ7W7uWitoih+jMNFXQIbNl16bO8OZmylH/Vi/Ei crossorigin=anonymous> <link rel=stylesheet href=/css/main.css><main><h1 id=lab-8-floating-point-examples>Lab 8: Floating Point examples</h1><section><p><a href=lab8.html>Lab 8</a> asks you to implement addition and multiplication for single-precision, 32-bit floating point numbers. A few worked examples are given below.</section><section><h2 id=addition>Addition</h2><p>My implementation for <code class="language-plaintext highlighter-rouge">xadd</code> looks something like this.<ol><li>Check if either <code class="language-plaintext highlighter-rouge">x</code> or <code class="language-plaintext highlighter-rouge">y</code> is zero and return the other one if so;<li>Denormalize <code class="language-plaintext highlighter-rouge">x</code> or <code class="language-plaintext highlighter-rouge">y</code> to give them the same exponent (the exponent of the larger one);<li>Add the significands, taking sign into account;<li>If the result is 0, return 0;<li>Normalize the result; and<li>Encode the result (bias the exponent; and mask off the hidden bit) and finally construct the new <code class="language-plaintext highlighter-rouge">Xfloat</code> with the result’s sign, exponent, and significand.</ol><p>Let’s apply this algorithm to adding <span class=katex><span class=katex-mathml><math><semantics><mrow><mn>2</mn><mi mathvariant=normal>.</mi><mn>5</mn></mrow><annotation encoding=application/x-tex>2.5</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=strut style=height:0.64444em></span><span class="strut bottom" style=height:0.64444em;vertical-align:0em></span><span class=base><span class=mord>2</span><span class=mord>.</span><span class=mord>5</span></span></span></span> and <span class=katex><span class=katex-mathml><math><semantics><mrow><mo>−</mo><mn>7</mn><mi mathvariant=normal>.</mi><mn>2</mn><mn>5</mn></mrow><annotation encoding=application/x-tex>-7.25</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=strut style=height:0.64444em></span><span class="strut bottom" style=height:0.72777em;vertical-align:-0.08333em></span><span class=base><span class=mord>−</span><span class=mord>7</span><span class=mord>.</span><span class=mord>2</span><span class=mord>5</span></span></span></span> to see how this works.<p>Let’s start by encoding these as a 32-bit single precision floating point number, performing the 5 steps, and looking at the result.<p><span class=katex><span class=katex-mathml><math><semantics><mrow><mn>2</mn><mi mathvariant=normal>.</mi><msub><mn>5</mn><mrow><mn>1</mn><mn>0</mn></mrow></msub><mo>=</mo><mn>1</mn><mn>0</mn><mi mathvariant=normal>.</mi><msub><mn>1</mn><mn>2</mn></msub><mo>=</mo><mn>1</mn><mi mathvariant=normal>.</mi><mn>0</mn><msub><mn>1</mn><mn>2</mn></msub><mo>⋅</mo><msup><mn>2</mn><mn>1</mn></msup><mo>=</mo><mo>(</mo><mo>−</mo><mn>1</mn><msup><mo>)</mo><mn>0</mn></msup><mo>⋅</mo><mn>1</mn><mi mathvariant=normal>.</mi><mn>0</mn><mn>1</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><msub><mn>0</mn><mn>2</mn></msub><mo>⋅</mo><msup><mn>2</mn><mn>1</mn></msup></mrow><annotation encoding=application/x-tex>2.5_{10} = 10.1_2 = 1.01_2\cdot2^1 =
(-1)^0\cdot1.01000000000000000000000_2\cdot2^1</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=strut style=height:0.8141079999999999em></span><span class="strut bottom" style=height:1.064108em;vertical-align:-0.25em></span><span class=base><span class=mord>2</span><span class=mord>.</span><span class=mord><span class=mord>5</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:0.30110799999999993em><span style=top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">0</span></span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:0.15em></span></span></span></span></span><span class="mord rule" style=margin-right:0.2777777777777778em></span><span class=mrel>=</span><span class="mord rule" style=margin-right:0.2777777777777778em></span><span class=mord>1</span><span class=mord>0</span><span class=mord>.</span><span class=mord><span class=mord>1</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:0.30110799999999993em><span style=top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:0.15em></span></span></span></span></span><span class="mord rule" style=margin-right:0.2777777777777778em></span><span class=mrel>=</span><span class="mord rule" style=margin-right:0.2777777777777778em></span><span class=mord>1</span><span class=mord>.</span><span class=mord>0</span><span class=mord><span class=mord>1</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:0.30110799999999993em><span style=top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:0.15em></span></span></span></span></span><span class="mord rule" style=margin-right:0.2222222222222222em></span><span class=mbin>⋅</span><span class="mord rule" style=margin-right:0.2222222222222222em></span><span class=mord><span class=mord>2</span><span class=msupsub><span class=vlist-t><span class=vlist-r><span class=vlist style=height:0.8141079999999999em><span style=top:-3.063em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span></span></span></span></span><span class="mord rule" style=margin-right:0.2777777777777778em></span><span class=mrel>=</span><span class="mord rule" style=margin-right:0.2777777777777778em></span><span class=mopen>(</span><span class=mord>−</span><span class=mord>1</span><span class=mclose><span class=mclose>)</span><span class=msupsub><span class=vlist-t><span class=vlist-r><span class=vlist style=height:0.8141079999999999em><span style=top:-3.063em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span></span></span></span></span><span class="mord rule" style=margin-right:0.2222222222222222em></span><span class=mbin>⋅</span><span class="mord rule" style=margin-right:0.2222222222222222em></span><span class=mord>1</span><span class=mord>.</span><span class=mord>0</span><span class=mord>1</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord><span class=mord>0</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:0.30110799999999993em><span style=top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:0.15em></span></span></span></span></span><span class="mord rule" style=margin-right:0.2222222222222222em></span><span class=mbin>⋅</span><span class="mord rule" style=margin-right:0.2222222222222222em></span><span class=mord><span class=mord>2</span><span class=msupsub><span class=vlist-t><span class=vlist-r><span class=vlist style=height:0.8141079999999999em><span style=top:-3.063em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span></span>. Therefore, the three fields of the float are sign = 0, exponent = 1, and significand = <span class=katex><span class=katex-mathml><math><semantics><mrow><mn>1</mn><mi mathvariant=normal>.</mi><mn>0</mn><mn>1</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><msub><mn>0</mn><mn>2</mn></msub></mrow><annotation encoding=application/x-tex>1.01000000000000000000000_2</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=strut style=height:0.64444em></span><span class="strut bottom" style=height:0.79444em;vertical-align:-0.15em></span><span class=base><span class=mord>1</span><span class=mord>.</span><span class=mord>0</span><span class=mord>1</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord><span class=mord>0</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:0.30110799999999993em><span style=top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:0.15em></span></span></span></span></span></span></span></span>. These are encoded as <code class="language-plaintext highlighter-rouge">0 10000000 01000000000000000000000</code> (where I’ve added 127 to the exponent and dropped the hidden bit from the significand).<p><span class=katex><span class=katex-mathml><math><semantics><mrow><mo>−</mo><mn>7</mn><mi mathvariant=normal>.</mi><mn>2</mn><msub><mn>5</mn><mrow><mn>1</mn><mn>0</mn></mrow></msub><mo>=</mo><mo>−</mo><mn>1</mn><mn>1</mn><mn>1</mn><mi mathvariant=normal>.</mi><mn>0</mn><msub><mn>1</mn><mn>2</mn></msub><mo>=</mo><mo>(</mo><mo>−</mo><mn>1</mn><msup><mo>)</mo><mn>1</mn></msup><mo>⋅</mo><mn>1</mn><mi mathvariant=normal>.</mi><mn>1</mn><mn>1</mn><mn>0</mn><mn>1</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><msub><mn>0</mn><mn>2</mn></msub><mo>⋅</mo><msup><mn>2</mn><mn>2</mn></msup></mrow><annotation encoding=application/x-tex>-7.25_{10} = -111.01_2 = (-1)^1\cdot1.11010000000000000000000_2\cdot2^2</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=strut style=height:0.8141079999999999em></span><span class="strut bottom" style=height:1.064108em;vertical-align:-0.25em></span><span class=base><span class=mord>−</span><span class=mord>7</span><span class=mord>.</span><span class=mord>2</span><span class=mord><span class=mord>5</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:0.30110799999999993em><span style=top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">0</span></span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:0.15em></span></span></span></span></span><span class="mord rule" style=margin-right:0.2777777777777778em></span><span class=mrel>=</span><span class="mord rule" style=margin-right:0.2777777777777778em></span><span class=mord>−</span><span class=mord>1</span><span class=mord>1</span><span class=mord>1</span><span class=mord>.</span><span class=mord>0</span><span class=mord><span class=mord>1</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:0.30110799999999993em><span style=top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:0.15em></span></span></span></span></span><span class="mord rule" style=margin-right:0.2777777777777778em></span><span class=mrel>=</span><span class="mord rule" style=margin-right:0.2777777777777778em></span><span class=mopen>(</span><span class=mord>−</span><span class=mord>1</span><span class=mclose><span class=mclose>)</span><span class=msupsub><span class=vlist-t><span class=vlist-r><span class=vlist style=height:0.8141079999999999em><span style=top:-3.063em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span></span></span></span></span><span class="mord rule" style=margin-right:0.2222222222222222em></span><span class=mbin>⋅</span><span class="mord rule" style=margin-right:0.2222222222222222em></span><span class=mord>1</span><span class=mord>.</span><span class=mord>1</span><span class=mord>1</span><span class=mord>0</span><span class=mord>1</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord><span class=mord>0</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:0.30110799999999993em><span style=top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:0.15em></span></span></span></span></span><span class="mord rule" style=margin-right:0.2222222222222222em></span><span class=mbin>⋅</span><span class="mord rule" style=margin-right:0.2222222222222222em></span><span class=mord><span class=mord>2</span><span class=msupsub><span class=vlist-t><span class=vlist-r><span class=vlist style=height:0.8141079999999999em><span style=top:-3.063em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span>. Therefore, the three fields of the float are sign = 1, exponent = 2, and significand = <span class=katex><span class=katex-mathml><math><semantics><mrow><mn>1</mn><mi mathvariant=normal>.</mi><mn>0</mn><mn>1</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><msub><mn>0</mn><mn>2</mn></msub></mrow><annotation encoding=application/x-tex>1.01000000000000000000000_2</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=strut style=height:0.64444em></span><span class="strut bottom" style=height:0.79444em;vertical-align:-0.15em></span><span class=base><span class=mord>1</span><span class=mord>.</span><span class=mord>0</span><span class=mord>1</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord><span class=mord>0</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:0.30110799999999993em><span style=top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:0.15em></span></span></span></span></span></span></span></span>. Similarly, these are encoded as <code class="language-plaintext highlighter-rouge">1 10000001 11010000000000000000000</code>.<p>Step 1. Neither <code class="language-plaintext highlighter-rouge">x</code> nor <code class="language-plaintext highlighter-rouge">y</code> are zero, so we continue to step 2.<p>Step 2. Extract and unbias the exponents for <code class="language-plaintext highlighter-rouge">x</code> and <code class="language-plaintext highlighter-rouge">y</code>; extract and add in the hidden bit to the significands for <code class="language-plaintext highlighter-rouge">x</code> and <code class="language-plaintext highlighter-rouge">y</code>. This gives the following.<div class="language-plaintext highlighter-rouge"><div class=highlight><pre class=highlight><code>x_exp = 1
y_exp = 2
x_sig = 00000000 1 01000000000000000000000
y_sig = 00000000 1 11010000000000000000000
</code></pre></div></div><p>In <code class="language-plaintext highlighter-rouge">x_sig</code> and <code class="language-plaintext highlighter-rouge">y_sig</code>, the first 8 bits are 0s, the next bit is the hidden 1 bit and the remaining 23 are the significand without the hidden bit.<p>Since <code class="language-plaintext highlighter-rouge">y_exp &gt; x_exp</code>, we denormalize <code class="language-plaintext highlighter-rouge">x</code> by shifting <code class="language-plaintext highlighter-rouge">x_sig</code> <em>right</em> by <code class="language-plaintext highlighter-rouge">y_exp - x_exp</code> and setting <code class="language-plaintext highlighter-rouge">x_exp</code> to <code class="language-plaintext highlighter-rouge">y_exp</code>. This gives us the following variables.<div class="language-plaintext highlighter-rouge"><div class=highlight><pre class=highlight><code>x_exp = 2
y_exp = 2
x_sig = 00000000010100000000000000000000
y_sig = 00000000111010000000000000000000
</code></pre></div></div><p>Step 3. We need to add the significands together paying attention to the sign. Because <code class="language-plaintext highlighter-rouge">x</code> is positive and <code class="language-plaintext highlighter-rouge">y</code> is negative, we need to compute <code class="language-plaintext highlighter-rouge">z_sig = x_sig - y_sig</code> where <code class="language-plaintext highlighter-rouge">z</code> is going to be the result. In this case, <code class="language-plaintext highlighter-rouge">z_sig</code> is negative and we can’t have that, so we’ll set <code class="language-plaintext highlighter-rouge">z_sign = 1</code> and <code class="language-plaintext highlighter-rouge">z_sig = -z_sig</code>. In any case, <code class="language-plaintext highlighter-rouge">z_exp = x_exp = y_exp</code>, although that can change in step 5 when we normalize the result.<div class="language-plaintext highlighter-rouge"><div class=highlight><pre class=highlight><code>z_sign = 1
z_exp = 2
z_sig = 00000000100110000000000000000000
</code></pre></div></div><p>Step 4. The result is not zero, so move to the next step.<p>Step 5. Now, we need to normalize the result, but in this particular case, there’s actually nothing to be done! I can tell there’s nothing to be done because the significand is <code class="language-plaintext highlighter-rouge">00000000 1 00110000000000000000000</code>. In other words, it starts with eight 0s and then a 1 (the hidden bit) followed by 23 bits. If it started with fewer than eight 0s, we’d need to shift the significand to the right and increment the exponent until it started with eight 0s. If it started with more than eight 0s, we’d need to shift the significand to the left and decrement the exponent until it started with eight 0s.<p>This gives our final value of<div class="language-plaintext highlighter-rouge"><div class=highlight><pre class=highlight><code>z_sign = 1
z_exp = 2
z_sig = 00000000 1 00110000000000000000000
</code></pre></div></div><p>We can check we did this correctly with some arithmetic: <span class=katex><span class=katex-mathml><math><semantics><mrow><mo>(</mo><mo>−</mo><mn>1</mn><msup><mo>)</mo><mn>1</mn></msup><mo>⋅</mo><mn>1</mn><mi mathvariant=normal>.</mi><mn>0</mn><mn>0</mn><mn>1</mn><msub><mn>1</mn><mn>2</mn></msub><mo>⋅</mo><msup><mn>2</mn><mn>2</mn></msup><mo>=</mo><mo>−</mo><mn>1</mn><mn>0</mn><mn>0</mn><mi mathvariant=normal>.</mi><mn>1</mn><msub><mn>1</mn><mn>2</mn></msub><mo>=</mo><mo>−</mo><mn>4</mn><mi mathvariant=normal>.</mi><mn>7</mn><mn>5</mn></mrow><annotation encoding=application/x-tex>(-1)^1\cdot1.0011_2\cdot2^2 = -100.11_2=-4.75</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=strut style=height:0.8141079999999999em></span><span class="strut bottom" style=height:1.064108em;vertical-align:-0.25em></span><span class=base><span class=mopen>(</span><span class=mord>−</span><span class=mord>1</span><span class=mclose><span class=mclose>)</span><span class=msupsub><span class=vlist-t><span class=vlist-r><span class=vlist style=height:0.8141079999999999em><span style=top:-3.063em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span></span></span></span></span><span class="mord rule" style=margin-right:0.2222222222222222em></span><span class=mbin>⋅</span><span class="mord rule" style=margin-right:0.2222222222222222em></span><span class=mord>1</span><span class=mord>.</span><span class=mord>0</span><span class=mord>0</span><span class=mord>1</span><span class=mord><span class=mord>1</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:0.30110799999999993em><span style=top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:0.15em></span></span></span></span></span><span class="mord rule" style=margin-right:0.2222222222222222em></span><span class=mbin>⋅</span><span class="mord rule" style=margin-right:0.2222222222222222em></span><span class=mord><span class=mord>2</span><span class=msupsub><span class=vlist-t><span class=vlist-r><span class=vlist style=height:0.8141079999999999em><span style=top:-3.063em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mord rule" style=margin-right:0.2777777777777778em></span><span class=mrel>=</span><span class="mord rule" style=margin-right:0.2777777777777778em></span><span class=mord>−</span><span class=mord>1</span><span class=mord>0</span><span class=mord>0</span><span class=mord>.</span><span class=mord>1</span><span class=mord><span class=mord>1</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:0.30110799999999993em><span style=top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:0.15em></span></span></span></span></span><span class="mord rule" style=margin-right:0.2777777777777778em></span><span class=mrel>=</span><span class="mord rule" style=margin-right:0.2777777777777778em></span><span class=mord>−</span><span class=mord>4</span><span class=mord>.</span><span class=mord>7</span><span class=mord>5</span></span></span></span>. Success!<p>Step 6. The last thing we need to do is encode the result. So we need to add 127 to the exponent and mask off the hidden bit in the significand giving <code class="language-plaintext highlighter-rouge">1 10000001 00110000000000000000000</code>.</section><section><p>The previous example shows off all of the steps except for step 5, normalize the result. So let’s do another quick example, but this time using 2.5 and 7.25.<p>Steps 1 and 2 are identical. After them, we have<div class="language-plaintext highlighter-rouge"><div class=highlight><pre class=highlight><code>x_exp = 2
y_exp = 2
x_sig = 00000000010100000000000000000000
y_sig = 00000000111010000000000000000000
</code></pre></div></div><p>In step 3, we simply add the significands together since neither x nor y is negative. This gives.<div class="language-plaintext highlighter-rouge"><div class=highlight><pre class=highlight><code>z_sign = 0
z_exp = 2
z_sig = 00000001001110000000000000000000
</code></pre></div></div><p>Step 4 is the same: <code class="language-plaintext highlighter-rouge">z_sig</code> is not 0, so we continue to step 5.<p>Step 5. Here, <code class="language-plaintext highlighter-rouge">z_sig</code> starts with seven 0s so we need to shift <code class="language-plaintext highlighter-rouge">z_sig</code> right by 1 and increment the exponent by one giving<div class="language-plaintext highlighter-rouge"><div class=highlight><pre class=highlight><code>z_sign = 0
z_exp = 3
z_sig = 00000000 1 00111000000000000000000
</code></pre></div></div><p>Checking our arithmetic, we have <span class=katex><span class=katex-mathml><math><semantics><mrow><mo>(</mo><mo>−</mo><mn>1</mn><msup><mo>)</mo><mn>0</mn></msup><mo>⋅</mo><mn>1</mn><mi mathvariant=normal>.</mi><mn>0</mn><mn>0</mn><mn>1</mn><mn>1</mn><msub><mn>1</mn><mn>2</mn></msub><mo>⋅</mo><msup><mn>2</mn><mn>3</mn></msup><mo>=</mo><mn>1</mn><mn>0</mn><mn>0</mn><mn>1</mn><mi mathvariant=normal>.</mi><mn>1</mn><msub><mn>1</mn><mn>2</mn></msub><mo>=</mo><mn>9</mn><mi mathvariant=normal>.</mi><mn>7</mn><mn>5</mn></mrow><annotation encoding=application/x-tex>(-1)^0\cdot1.00111_2\cdot2^3 = 1001.11_2 = 9.75</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=strut style=height:0.8141079999999999em></span><span class="strut bottom" style=height:1.064108em;vertical-align:-0.25em></span><span class=base><span class=mopen>(</span><span class=mord>−</span><span class=mord>1</span><span class=mclose><span class=mclose>)</span><span class=msupsub><span class=vlist-t><span class=vlist-r><span class=vlist style=height:0.8141079999999999em><span style=top:-3.063em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span></span></span></span></span><span class="mord rule" style=margin-right:0.2222222222222222em></span><span class=mbin>⋅</span><span class="mord rule" style=margin-right:0.2222222222222222em></span><span class=mord>1</span><span class=mord>.</span><span class=mord>0</span><span class=mord>0</span><span class=mord>1</span><span class=mord>1</span><span class=mord><span class=mord>1</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:0.30110799999999993em><span style=top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:0.15em></span></span></span></span></span><span class="mord rule" style=margin-right:0.2222222222222222em></span><span class=mbin>⋅</span><span class="mord rule" style=margin-right:0.2222222222222222em></span><span class=mord><span class=mord>2</span><span class=msupsub><span class=vlist-t><span class=vlist-r><span class=vlist style=height:0.8141079999999999em><span style=top:-3.063em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mord rule" style=margin-right:0.2777777777777778em></span><span class=mrel>=</span><span class="mord rule" style=margin-right:0.2777777777777778em></span><span class=mord>1</span><span class=mord>0</span><span class=mord>0</span><span class=mord>1</span><span class=mord>.</span><span class=mord>1</span><span class=mord><span class=mord>1</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:0.30110799999999993em><span style=top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:0.15em></span></span></span></span></span><span class="mord rule" style=margin-right:0.2777777777777778em></span><span class=mrel>=</span><span class="mord rule" style=margin-right:0.2777777777777778em></span><span class=mord>9</span><span class=mord>.</span><span class=mord>7</span><span class=mord>5</span></span></span></span>. Success!<p>Step 6. We encode by adding 127 to the exponent and masking off the hidden bit as before giving <code class="language-plaintext highlighter-rouge">0 10000010 00111000000000000000000</code>.</section><section><h2 id=multiplication>Multiplication</h2><p>My implementation of <code class="language-plaintext highlighter-rouge">xmult</code> looks something like this.<ol><li>If either <code class="language-plaintext highlighter-rouge">x</code> or <code class="language-plaintext highlighter-rouge">y</code> is 0, return 0;<li>Compute the sign of the result;<li>Add the exponents;<li>Multiply the significands and shift;<li>Normalize the result; and<li>Encode the exponent and significand.</ol><p>As a simple example, let’s multiply <span class=katex><span class=katex-mathml><math><semantics><mrow><mo>−</mo><mn>1</mn></mrow><annotation encoding=application/x-tex>-1</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=strut style=height:0.64444em></span><span class="strut bottom" style=height:0.72777em;vertical-align:-0.08333em></span><span class=base><span class=mord>−</span><span class=mord>1</span></span></span></span> and <span class=katex><span class=katex-mathml><math><semantics><mrow><mn>3</mn><mn>3</mn><mi mathvariant=normal>.</mi><mn>2</mn><mn>5</mn></mrow><annotation encoding=application/x-tex>33.25</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=strut style=height:0.64444em></span><span class="strut bottom" style=height:0.64444em;vertical-align:0em></span><span class=base><span class=mord>3</span><span class=mord>3</span><span class=mord>.</span><span class=mord>2</span><span class=mord>5</span></span></span></span>. These have encodings<div class="language-plaintext highlighter-rouge"><div class=highlight><pre class=highlight><code>x: 1 01111111 00000000000000000000000
y: 0 10000100 00001010000000000000000
</code></pre></div></div><p>Step 1. Neither <code class="language-plaintext highlighter-rouge">x</code> nor <code class="language-plaintext highlighter-rouge">y</code> are 0, so continue to step 2.<p>Step 2. Since <code class="language-plaintext highlighter-rouge">x</code> is negative and <code class="language-plaintext highlighter-rouge">y</code> is positive, we know the result is negative.<div class="language-plaintext highlighter-rouge"><div class=highlight><pre class=highlight><code>z_sign = 1
</code></pre></div></div><p>Step 3. Add the exponents. Since the exponent of <code class="language-plaintext highlighter-rouge">x</code> is 0 and the exponent of <code class="language-plaintext highlighter-rouge">y</code> is 5, the exponent of the result is 5.<div class="language-plaintext highlighter-rouge"><div class=highlight><pre class=highlight><code>z_exp = 5
</code></pre></div></div><p>Step 4. Multiply the significands as 64-bit <code class="language-plaintext highlighter-rouge">long</code>s, don’t forget the hidden bits!<div class="language-plaintext highlighter-rouge"><div class=highlight><pre class=highlight><code>x_sig = 00000000 00000000 00000000 00000000 00000000 10000000 00000000 00000000
y_sig = 00000000 00000000 00000000 00000000 00000000 10000101 00000000 00000000
z_sig = 00000000 00000000 01000010 10000000 00000000 00000000 00000000 00000000
</code></pre></div></div><p>The significands of <code class="language-plaintext highlighter-rouge">x</code> and <code class="language-plaintext highlighter-rouge">y</code> aren’t really <span class=katex><span class=katex-mathml><math><semantics><mrow><mn>1</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><msub><mn>0</mn><mn>2</mn></msub></mrow><annotation encoding=application/x-tex>100000000000000000000000_2</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=strut style=height:0.64444em></span><span class="strut bottom" style=height:0.79444em;vertical-align:-0.15em></span><span class=base><span class=mord>1</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord><span class=mord>0</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:0.30110799999999993em><span style=top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:0.15em></span></span></span></span></span></span></span></span> and <span class=katex><span class=katex-mathml><math><semantics><mrow><mn>1</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>1</mn><mn>0</mn><mn>1</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><msub><mn>0</mn><mn>2</mn></msub></mrow><annotation encoding=application/x-tex>100001010000000000000000_2</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=strut style=height:0.64444em></span><span class="strut bottom" style=height:0.79444em;vertical-align:-0.15em></span><span class=base><span class=mord>1</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>1</span><span class=mord>0</span><span class=mord>1</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord><span class=mord>0</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:0.30110799999999993em><span style=top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:0.15em></span></span></span></span></span></span></span></span>, they’re actually <span class=katex><span class=katex-mathml><math><semantics><mrow><mn>1</mn><mi mathvariant=normal>.</mi><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><msub><mn>0</mn><mn>2</mn></msub></mrow><annotation encoding=application/x-tex>1.00000000000000000000000_2</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=strut style=height:0.64444em></span><span class="strut bottom" style=height:0.79444em;vertical-align:-0.15em></span><span class=base><span class=mord>1</span><span class=mord>.</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord><span class=mord>0</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:0.30110799999999993em><span style=top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:0.15em></span></span></span></span></span></span></span></span> and <span class=katex><span class=katex-mathml><math><semantics><mrow><mn>1</mn><mi mathvariant=normal>.</mi><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>1</mn><mn>0</mn><mn>1</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><msub><mn>0</mn><mn>2</mn></msub></mrow><annotation encoding=application/x-tex>1.00001010000000000000000_2</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=strut style=height:0.64444em></span><span class="strut bottom" style=height:0.79444em;vertical-align:-0.15em></span><span class=base><span class=mord>1</span><span class=mord>.</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>1</span><span class=mord>0</span><span class=mord>1</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord><span class=mord>0</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:0.30110799999999993em><span style=top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:0.15em></span></span></span></span></span></span></span></span> (note the binary point). That is, the real significands are the 24-bit values (23 bits from the float plus the hidden bit) multiplied by <span class=katex><span class=katex-mathml><math><semantics><mrow><msup><mn>2</mn><mrow><mo>−</mo><mn>2</mn><mn>3</mn></mrow></msup></mrow><annotation encoding=application/x-tex>2^{-23}</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=strut style=height:0.8141079999999999em></span><span class="strut bottom" style=height:0.8141079999999999em;vertical-align:0em></span><span class=base><span class=mord><span class=mord>2</span><span class=msupsub><span class=vlist-t><span class=vlist-r><span class=vlist style=height:0.8141079999999999em><span style=top:-3.063em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">2</span><span class="mord mtight">3</span></span></span></span></span></span></span></span></span></span></span></span>. And when we multiply them together, our result is really <span class=katex-display><span class=katex><span class=katex-mathml><math><semantics><mrow><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mspace width=0.16667em></mspace><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mspace width=0.16667em></mspace><mn>0</mn><mn>1</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>1</mn><mn>0</mn><mspace width=0.16667em></mspace><mn>1</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mspace width=0.16667em></mspace><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mspace width=0.16667em></mspace><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mspace width=0.16667em></mspace><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mspace width=0.16667em></mspace><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><msub><mn>0</mn><mn>2</mn></msub><mo>×</mo><msup><mn>2</mn><mrow><mo>−</mo><mn>4</mn><mn>6</mn></mrow></msup><mi mathvariant=normal>.</mi></mrow><annotation encoding=application/x-tex>00000000\, 00000000\, 01000010\, 10000000\, 00000000\, 00000000\, 00000000\, 00000000_2\times2^{-46}.</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=strut style=height:0.864108em></span><span class="strut bottom" style=height:1.014108em;vertical-align:-0.15em></span><span class=base><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class="mspace thinspace"></span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class="mspace thinspace"></span><span class=mord>0</span><span class=mord>1</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>1</span><span class=mord>0</span><span class="mspace thinspace"></span><span class=mord>1</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class="mspace thinspace"></span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class="mspace thinspace"></span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class="mspace thinspace"></span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class="mspace thinspace"></span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord><span class=mord>0</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:0.30110799999999993em><span style=top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:0.15em></span></span></span></span></span><span class="mord rule" style=margin-right:0.2222222222222222em></span><span class=mbin>×</span><span class="mord rule" style=margin-right:0.2222222222222222em></span><span class=mord><span class=mord>2</span><span class=msupsub><span class=vlist-t><span class=vlist-r><span class=vlist style=height:0.864108em><span style=top:-3.113em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">4</span><span class="mord mtight">6</span></span></span></span></span></span></span></span></span><span class=mord>.</span></span></span></span></span><p>To bring the result back to our normal representation as a number times <span class=katex><span class=katex-mathml><math><semantics><mrow><msup><mn>2</mn><mrow><mo>−</mo><mn>2</mn><mn>3</mn></mrow></msup></mrow><annotation encoding=application/x-tex>2^{-23}</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=strut style=height:0.8141079999999999em></span><span class="strut bottom" style=height:0.8141079999999999em;vertical-align:0em></span><span class=base><span class=mord><span class=mord>2</span><span class=msupsub><span class=vlist-t><span class=vlist-r><span class=vlist style=height:0.8141079999999999em><span style=top:-3.063em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">2</span><span class="mord mtight">3</span></span></span></span></span></span></span></span></span></span></span></span>, we need to shift <code class="language-plaintext highlighter-rouge">z_sig</code> right by 23 bits.<div class="language-plaintext highlighter-rouge"><div class=highlight><pre class=highlight><code>z_sig = 00000001 00001010 0000000 00000000
</code></pre></div></div><p>Steps 5 and 6, normalizing and encoding the result work the same as for addition.<p>In this case, there’s nothing to be done, <code class="language-plaintext highlighter-rouge">z_sig</code> is already normalized (as a 32-bit integer, it has 8 leading zeros followed by the 1 corresponding to the hidden bit). Thus, our result is <span class=katex><span class=katex-mathml><math><semantics><mrow><mo>(</mo><mo>−</mo><mn>1</mn><msup><mo>)</mo><mn>1</mn></msup><mo>⋅</mo><mn>1</mn><mi mathvariant=normal>.</mi><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>1</mn><mn>0</mn><msub><mn>1</mn><mn>2</mn></msub><mo>×</mo><msup><mn>2</mn><mn>5</mn></msup><mo>=</mo><mo>−</mo><mn>1</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>0</mn><mn>1</mn><mi mathvariant=normal>.</mi><mn>0</mn><msub><mn>1</mn><mn>2</mn></msub><mo>=</mo><mo>−</mo><mn>3</mn><mn>3</mn><mi mathvariant=normal>.</mi><mn>2</mn><mn>5</mn></mrow><annotation encoding=application/x-tex>(-1)^1\cdot1.0000101_2\times2^5=-100001.01_2=-33.25</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=strut style=height:0.8141079999999999em></span><span class="strut bottom" style=height:1.064108em;vertical-align:-0.25em></span><span class=base><span class=mopen>(</span><span class=mord>−</span><span class=mord>1</span><span class=mclose><span class=mclose>)</span><span class=msupsub><span class=vlist-t><span class=vlist-r><span class=vlist style=height:0.8141079999999999em><span style=top:-3.063em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span></span></span></span></span><span class="mord rule" style=margin-right:0.2222222222222222em></span><span class=mbin>⋅</span><span class="mord rule" style=margin-right:0.2222222222222222em></span><span class=mord>1</span><span class=mord>.</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>1</span><span class=mord>0</span><span class=mord><span class=mord>1</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:0.30110799999999993em><span style=top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:0.15em></span></span></span></span></span><span class="mord rule" style=margin-right:0.2222222222222222em></span><span class=mbin>×</span><span class="mord rule" style=margin-right:0.2222222222222222em></span><span class=mord><span class=mord>2</span><span class=msupsub><span class=vlist-t><span class=vlist-r><span class=vlist style=height:0.8141079999999999em><span style=top:-3.063em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">5</span></span></span></span></span></span></span></span><span class="mord rule" style=margin-right:0.2777777777777778em></span><span class=mrel>=</span><span class="mord rule" style=margin-right:0.2777777777777778em></span><span class=mord>−</span><span class=mord>1</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>0</span><span class=mord>1</span><span class=mord>.</span><span class=mord>0</span><span class=mord><span class=mord>1</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:0.30110799999999993em><span style=top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:0.15em></span></span></span></span></span><span class="mord rule" style=margin-right:0.2777777777777778em></span><span class=mrel>=</span><span class="mord rule" style=margin-right:0.2777777777777778em></span><span class=mord>−</span><span class=mord>3</span><span class=mord>3</span><span class=mord>.</span><span class=mord>2</span><span class=mord>5</span></span></span></span> and its encoding is <code class="language-plaintext highlighter-rouge">1 10000100 00001010000000000000000</code>.</section></main>