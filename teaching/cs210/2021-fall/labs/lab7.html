<!DOCTYPE html><html lang=en><meta http-equiv=Content-Type content="text/html;charset=utf-8"> <meta http-equiv=X-UA-Compatible content="IE=edge"> <meta name=viewport content="width=device-width, initial-scale=1"><title>Lab 7: Four-bit Counter</title><meta name=description content="Lab 7: Four-bit Counter Due: Sunday, December 12 at 23:59"> <link rel=canonical href=https://checkoway.net/teaching/cs210/2021-fall/labs/lab7.html> <link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.9.0/katex.min.css integrity=sha384-TEMocfGvRuD1rIAacqrknm5BQZ7W7uWitoih+jMNFXQIbNl16bO8OZmylH/Vi/Ei crossorigin=anonymous> <link rel=stylesheet href=/css/main.css><style>span.not{border-top:1px solid black}</style><main><h1 id=lab-7-four-bit-counter>Lab 7: Four-bit Counter</h1><p><strong>Due: Sunday, December 12 at 23:59</strong><section><p>In this lab, you will build an four-bit counter out of J-K flip-flops. To build the J-K flip-flops, you’re going to build a clocked S-R latch.<h2 id=preliminaries>Preliminaries</h2><p>We will be using the <a href=https://circuitverse.org>CircuitVerse</a> website to complete this assignment. To start the assignment, click on your name on the upper righthand side of the website. Go to “My Groups” and then select the group for this class and you should see “Lab 5” under assignments. Click the “Start Working” button to start the assignment. After you click “Start Working” you can click “Launch Simulator” to start creating the assignment.<p>You can find more details on how to use the circuitverse website <a href=https://docs.circuitverse.org/#/>here</a>.</section><section><h3 id=clocked-s-r-latch>Clocked S-R latch</h3><p>Your clocked S-R latch should behave as described in class and in the book. In particular, it should have three inputs, S, R, and C. When C is 1, the outputs Q and <span class=not>Q</span> are controlled by S and R. When C is 0, the outputs should not change regardless of the values of S and R.<p>You may wish to review <a href="https://checkoway.net/teaching/cs210/2021-fall/slides/Lec19%20ClocksandTiming.pdf#page=25">the slides</a>.<p><strong>The S-R latch must be a subcircuit.</strong><h3 id=j-k-flip-flop>J-K flip-flop</h3><p>Your J-K flip-flop should be constructed from two S-R latches <strong>as a second subcircuit</strong>. The inputs to the circuit should be J, K, and C. The output should be Q.<p>Refer to Problem Set 8 for the construction of the J-K flip-flop.<h3 id=counter>Counter</h3><p>Your main circuit is a four-bit counter which you will build out of four J-K flip-flops.<p>This circuit should not require any input from the user/viewer of the circuit; you should use the clock as input, and it should automatically make your counter increase by one for every clock cycle. Your output should be a binary number displaying the current count. You can either display this as 4 individual 1-bit outputs, or 1 four-bit output. Your counter should count through 0000, 0001, 0010, 0011, …, 1110, 1111 and then start over at 0000.<p>Let’s start by considering a 1-bit counter. Every clock cycle, the output should alternate between 0 and 1. See the timing diagram below. Notice how output <span class=katex><span class=katex-mathml><math><semantics><mrow><msub><mi>X</mi><mn>0</mn></msub></mrow><annotation encoding=application/x-tex>X_0</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=strut style=height:0.68333em></span><span class="strut bottom" style=height:0.83333em;vertical-align:-0.15em></span><span class=base><span class=mord><span class="mord mathit" style=margin-right:0.07847em>X</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:0.30110799999999993em><span style=top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:0.15em></span></span></span></span></span></span></span></span> alternates between 0 and 1 and it stays at each of those for an entire clock period (the interval between the blue lines).<p><img src="1-bit counter.svg" alt="One-bit counter"><p>Look at Problem Set 8. There is a particular configuration of inputs to a J-K flip-flop that causes the output to “toggle” between 0 and 1 every time its clock input, C, changes from 1 to 0. Using a single J-K flip-flop, you can construct a 1-bit counter.<p>Next, let’s build a 2-bit counter. This should count as 00, 01, 10, 11, 00. Notice that the least-significant bit, <span class=katex><span class=katex-mathml><math><semantics><mrow><msub><mi>X</mi><mn>0</mn></msub></mrow><annotation encoding=application/x-tex>X_0</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=strut style=height:0.68333em></span><span class="strut bottom" style=height:0.83333em;vertical-align:-0.15em></span><span class=base><span class=mord><span class="mord mathit" style=margin-right:0.07847em>X</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:0.30110799999999993em><span style=top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:0.15em></span></span></span></span></span></span></span></span>, toggles on every clock cycle but <span class=katex><span class=katex-mathml><math><semantics><mrow><msub><mi>X</mi><mn>1</mn></msub></mrow><annotation encoding=application/x-tex>X_1</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=strut style=height:0.68333em></span><span class="strut bottom" style=height:0.83333em;vertical-align:-0.15em></span><span class=base><span class=mord><span class="mord mathit" style=margin-right:0.07847em>X</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:0.30110799999999993em><span style=top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:0.15em></span></span></span></span></span></span></span></span> only toggles when <span class=katex><span class=katex-mathml><math><semantics><mrow><msub><mi>X</mi><mn>0</mn></msub></mrow><annotation encoding=application/x-tex>X_0</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=strut style=height:0.68333em></span><span class="strut bottom" style=height:0.83333em;vertical-align:-0.15em></span><span class=base><span class=mord><span class="mord mathit" style=margin-right:0.07847em>X</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:0.30110799999999993em><span style=top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:0.15em></span></span></span></span></span></span></span></span> changes from a 1 to a 0, not when the clock changes from a 1 to a 0. In the image below, the blue vertical lines correspond to the counter values 00, 01, 10, 10, 11, 00, from left to right.<p><img src="2-bit counter.svg" alt="Two-bit counter"><p>To get a 2-bit counter, we just need two J-K flip-flops with appropriate J and K values and with the clock input of the second J-K flip-flop being the output from the first flip-flop.<p>Similarly, we can build a 3-bit counter by adding another flip-flop. Look at the timing diagram below. When does <span class=katex><span class=katex-mathml><math><semantics><mrow><msub><mi>X</mi><mn>2</mn></msub></mrow><annotation encoding=application/x-tex>X_2</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=strut style=height:0.68333em></span><span class="strut bottom" style=height:0.83333em;vertical-align:-0.15em></span><span class=base><span class=mord><span class="mord mathit" style=margin-right:0.07847em>X</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:0.30110799999999993em><span style=top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:0.15em></span></span></span></span></span></span></span></span> toggle?<p><img src="3-bit counter.svg" alt="Three-bit counter"><p>We can continue this process to get a 4-bit counter.<p><img src="4-bit counter.svg" alt="Four-bit counter"><h2 id=implementation-plan>Implementation plan</h2><p>You are required to build this counter using only with basic logic gates (i.e., AND, OR, NOT, NOR, NAND and XOR). You are not allowed to use the CircuitVerse latches and flip-flops. You should take the following steps.<ol><li>Build an S-R latch as a <a href=https://docs.circuitverse.org/#/subcircuit>subcircuit</a>;<li>Build a J-K flip-flop as a <a href=https://docs.circuitverse.org/#/subcircuit>subcircuit</a>; and<li>Build a four-bit counter out of four J-K flip-flops.</ol><p>You are required to have a separate S-R latch and J-K flip-flop <a href=https://docs.circuitverse.org/#/subcircuit>subcircuits</a> to get full credit for the lab. You must build your own J-K flip-flops and S-R latches. Using the CircuitVerse latches of flip-flops will result in a failing grade for this lab.<h2 id=submission>Submission</h2><p>Make sure to select the “save online” button to save your project. This will make your project available to us for grading.</section></main>