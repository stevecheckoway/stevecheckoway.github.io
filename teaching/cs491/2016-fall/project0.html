<!DOCTYPE html><html lang=en><meta http-equiv=Content-Type content="text/html;charset=utf-8"> <meta http-equiv=X-UA-Compatible content="IE=edge"> <meta name=viewport content="width=device-width, initial-scale=1"><title>Project 0: Fun with assembly</title><meta name=description content="Project 0: Fun with assembly"> <link rel=stylesheet href=/css/main.css> <script>!function(e,t,a,n,c,o,s){e.GoogleAnalyticsObject=c,e[c]=e[c]||function(){(e[c].q=e[c].q||[]).push(arguments)},e[c].l=1*new Date,o=t.createElement(a),s=t.getElementsByTagName(a)[0],o.async=1,o.src=n,s.parentNode.insertBefore(o,s)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-34500030-2","auto"),ga("send","pageview");</script><main><h1 id=project-0-fun-with-assembly>Project 0: Fun with assembly</h1><p><strong>Due:</strong> Tuesday, September 6, 2016, 23:59<h2 id=goal>Goal</h2><p>The goal of this project is to become familiar with assembly language programming. This project will use 32-bit x86 assembly. Other projects will involve some subset of ARM, Thumb, and x86-64. Fortunately, once you become familiar with one assembly language, others are not too difficult.<h2 id=collaboration>Collaboration</h2><p>You may work on this project in collaboration with a single partner.<p>You must not discuss the project with anyone other than your partner and course staff. You may use online resources for general reference, but not to search for solutions to specific questions posed in this project.<h2 id=the-environment>The Environment</h2><p>You (and we, for grading) will run your code on an x86 Linux machine. You are free to write your code on your own personal machine or on a departmental machine (e.g., <code class=highlighter-rouge>bertvm</code> or <code class=highlighter-rouge>ernievm</code>).<p>If you don’t have an x86 Linux machine and you don’t want to use the departmental servers, one good choice is to install <a href=https://www.virtualbox.org/wiki/Downloads>VirtualBox</a> and run a <a href=https://www.debian.org/>Debian</a> virtual machine. There are many guides describing the steps to do that on the Internet.<h2 id=the-code>The Code</h2><p>This semester, you are going to use GitHub to (1) download the starter code, (2) collaborate with your partner, and (3) submit your solutions.<p>To download the code repository, follow these steps.<ol><li>Find a partner in the class.<li>If you do not already have one, create a free account on <a href=https://github.com>GitHub</a>.<li>Click the link for Project 0 on <a href=https://uic.blackboard.com>BlackBoard</a>. This will take you to GitHub Classroom (which may ask you to log into GitHub).<li>Once you’ve logged in, you will be asked to select a team or create a new one. Exactly one of you or your partner should create a team, the other should select the appropriate team. <strong>Important: Do not select the wrong team as you <em>cannot</em> change it later!</strong><li>This should create a new repository filled with starter code, testing code, and a script, <code class=highlighter-rouge>submit.sh</code>, which you will use to submit your code.</ol><h2 id=the-assignment>The Assignment</h2><p>You are going to implement functions that operate on unsigned <a href=http://en.wikipedia.org/wiki/Arbitrary-precision_arithmetic>big nums</a> You have to implement the five functions described in <code class=highlighter-rouge>bn.h</code> in 32-bit x86 assembly in the file <code class=highlighter-rouge>bn.s</code>.<p>Some stubs have been provided so that the initial code will compile but will not run correctly.<h2 id=deliverables>Deliverables</h2><p>At the top of <code class=highlighter-rouge>bn.s</code> add a comment with the names of everyone in your group. Additionally, for each function that you write (including any helpers you produce), add a comment describing what the function does, what its parameters are, and (briefly) how it works. <strong>This is required. Failure to do so will result in lost points.</strong><p>All of your code and your comments should be in the single file <code class=highlighter-rouge>bn.s</code>. You may not modify any other file in the repository as those changes will not be used. In particular, you may not modify the <code class=highlighter-rouge>Makefile</code> or any of the tests.<p>To build your code, run <code class=highlighter-rouge>make</code>. To run the test suite, run <code class=highlighter-rouge>make check</code>.<h2 id=submitting>Submitting</h2><p>You may submit your code at any time and you may do so as many times as you wish. <strong>Note: If you submit after the deadline given above, you will be penalized according to the course policy, even if a previous submission prior to the deadline worked perfectly.</strong><p>To submit, follow these simple steps.<ol><li>Commit all of your code (which should just be <code class=highlighter-rouge>bn.s</code>).<li>[Optional] Push your code to GitHub. (You should be doing this throughout your development process anyway.)<li>Run <code class=highlighter-rouge>./submit.sh</code>.</ol><p>Once you submit, a new branch called <code class=highlighter-rouge>submission</code> will be created on your repository on GitHub. This will cause our test machine to download and test your code. Once it has finished testing the code, a comment will be left on your commit on GitHub. The <code class=highlighter-rouge>submit.sh</code> script will print out the URL where the comment will appear. (It may take a few minutes for the comment to appear, depending on the load of the machine.)<h2 id=hints>Hints</h2><ul><li><code class=highlighter-rouge>gcc -m32 -S</code> is your friend! If you run that on a C file, it will produce assembly.<li>You should look at how <code class=highlighter-rouge>gcc</code> emits code for function calls and make sure you follow suit. See <a href=https://en.wikipedia.org/wiki/X86_calling_conventions#cdecl>Wikipedia</a> for details on stack alignment and the x86 cdecl calling convention used by Linux.<li>You can get <code class=highlighter-rouge>gcc</code> to use Intel syntax (instead of AT\&amp;T) for x86 with <code class=highlighter-rouge>gcc -S -masm=intel</code>.<li>For <code class=highlighter-rouge>bn_hex2bn</code>, a helper function that converts a single hex digit to an <code class=highlighter-rouge>int</code> can be very useful.<li>The standard library function <code class=highlighter-rouge>isxdigit()</code> can be helpful as well.<li>Several functions require ensuring that the <code class=highlighter-rouge>bn</code> has enough limbs. This can also be factored out into a helper function.<li>When adding numbers, you’ll want to use the <code class=highlighter-rouge>adc</code> instruction in a loop. The <code class=highlighter-rouge>clc</code> instruction can be used to clear the carry flag and the <code class=highlighter-rouge>loop</code> instruction can be used to decrement <code class=highlighter-rouge>ecx</code> and branch if nonzero without changing flags. Helpfully, <code class=highlighter-rouge>inc</code> and <code class=highlighter-rouge>dec</code> do <em>not</em> affect the carry flag.<li>You’re likely going to want to have a copy of the Intel manuals for reference. (See Resources on the main course webpage.)</ul><h2 id=ssh-with-virtualbox>SSH with VirtualBox</h2><p>If you want to run a VirtualBox VM locally, you may want to set up <code class=highlighter-rouge>ssh</code> so that you can <code class=highlighter-rouge>ssh</code> into the VM rather than typing into the tiny console window.<p>You can forward a TCP port from your host machine to the VM using VirtualBox. Select the Debian virtual machine you have created and go to <code class=highlighter-rouge>Settings &gt; Network &gt; Port Forwarding</code>. The VM may already be configured to forward a port. The setting I use has protocol TCP, host port 2222, and guest port 22. On my host machine, I have the following lines in my <code class=highlighter-rouge>$HOME/.ssh/config</code> file so that I can ssh to the VM by running <code class=highlighter-rouge>ssh debian</code> (where <code class=highlighter-rouge>user</code> is the non-root user I created):<div class=highlighter-rouge><div class=highlight><pre class=highlight><code>Host = debian
HostName = localhost
Port = 2222
User = user
</code></pre></div></div></main>