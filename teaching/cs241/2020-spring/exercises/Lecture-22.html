<!DOCTYPE html><html lang=en><meta http-equiv=Content-Type content="text/html;charset=utf-8"> <meta http-equiv=X-UA-Compatible content="IE=edge"> <meta name=viewport content="width=device-width, initial-scale=1"><title>Lecture 22</title><meta name=description content="Lecture 22 – Nov 1st, 2019"> <link rel=canonical href=https://checkoway.net/teaching/cs241/2020-spring/exercises/Lecture-22.html> <link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.9.0/katex.min.css integrity=sha384-TEMocfGvRuD1rIAacqrknm5BQZ7W7uWitoih+jMNFXQIbNl16bO8OZmylH/Vi/Ei crossorigin=anonymous> <link rel=stylesheet href=/css/main.css><main><h1 id=lecture-22--nov-1st-2019>Lecture 22 – Nov 1st, 2019</h1><h2 id=setup>Setup</h2><ol><li>Log in to clyde.<li><code class=highlighter-rouge>$ cp -r ~steve/ex/mda .</code></ol><h2 id=task>Task</h2><ol><li><p>Implement the function <code class=highlighter-rouge>read_array</code> in <code class=highlighter-rouge>array.c</code>. It should read in a rectangular (2D) array of integers from the specified file into an array and return the array along with the number of rows and columns. See <code class=highlighter-rouge>array.h</code> and <code class=highlighter-rouge>array.c</code> for details.<p>The first line of the file contains two integers: the number of rows and the number of columns. Following this are number-of-rows lines each of which contains number-of-columns integers. For example,<div class=highlighter-rouge><div class=highlight><pre class=highlight><code>5 3
1 2 3
4 5 6
7 8 9
10 11 12
13 14 15
</code></pre></div></div><p>represents a 2D array with 5 rows and 3 columns (this file is in <code class=highlighter-rouge>small.txt</code>) <span class=katex-display><span class=katex><span class=katex-mathml><math><semantics><mrow><mrow><mo fence=true>(</mo><mtable><mtr><mtd><mstyle scriptlevel=0 displaystyle=false><mrow><mn>1</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel=0 displaystyle=false><mrow><mn>2</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel=0 displaystyle=false><mrow><mn>3</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=0 displaystyle=false><mrow><mn>4</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel=0 displaystyle=false><mrow><mn>5</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel=0 displaystyle=false><mrow><mn>6</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=0 displaystyle=false><mrow><mn>7</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel=0 displaystyle=false><mrow><mn>8</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel=0 displaystyle=false><mrow><mn>9</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=0 displaystyle=false><mrow><mn>1</mn><mn>0</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel=0 displaystyle=false><mrow><mn>1</mn><mn>1</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel=0 displaystyle=false><mrow><mn>1</mn><mn>2</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=0 displaystyle=false><mrow><mn>1</mn><mn>3</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel=0 displaystyle=false><mrow><mn>1</mn><mn>4</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel=0 displaystyle=false><mrow><mn>1</mn><mn>5</mn></mrow></mstyle></mtd></mtr></mtable><mo fence=true>)</mo></mrow><mi mathvariant=normal>.</mi></mrow><annotation encoding=application/x-tex>\begin{pmatrix}1&amp;2&amp;3\\4&amp;5&amp;6\\7&amp;8&amp;9\\10&amp;11&amp;12\\13&amp;14&amp;15\end{pmatrix}.</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=strut style=height:3.25004em></span><span class="strut bottom" style=height:6.00008em;vertical-align:-2.75004em></span><span class=base><span class=minner><span class=mopen><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:3.25004em><span style=top:-1.0499800000000006em><span class=pstrut style=height:3.1550000000000002em></span><span class="delimsizinginner delim-size4"><span>⎝</span></span></span><span style=top:-2.2049900000000004em><span class=pstrut style=height:3.1550000000000002em></span><span class="delimsizinginner delim-size4"><span>⎜</span></span></span><span style=top:-2.805em><span class=pstrut style=height:3.1550000000000002em></span><span class="delimsizinginner delim-size4"><span>⎜</span></span></span><span style=top:-3.4050100000000003em><span class=pstrut style=height:3.1550000000000002em></span><span class="delimsizinginner delim-size4"><span>⎜</span></span></span><span style=top:-4.00502em><span class=pstrut style=height:3.1550000000000002em></span><span class="delimsizinginner delim-size4"><span>⎜</span></span></span><span style=top:-5.250039999999999em><span class=pstrut style=height:3.1550000000000002em></span><span class="delimsizinginner delim-size4"><span>⎛</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:2.75004em></span></span></span></span></span><span class=mord><span class=mtable><span class=col-align-c><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:3.2500000000000004em><span style=top:-5.410000000000001em><span class=pstrut style=height:3em></span><span class=mord><span class=mord>1</span></span></span><span style=top:-4.21em><span class=pstrut style=height:3em></span><span class=mord><span class=mord>4</span></span></span><span style=top:-3.01em><span class=pstrut style=height:3em></span><span class=mord><span class=mord>7</span></span></span><span style=top:-1.8099999999999998em><span class=pstrut style=height:3em></span><span class=mord><span class=mord>1</span><span class=mord>0</span></span></span><span style=top:-0.6099999999999997em><span class=pstrut style=height:3em></span><span class=mord><span class=mord>1</span><span class=mord>3</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:2.7500000000000004em></span></span></span></span><span class=arraycolsep style=width:0.5em></span><span class=arraycolsep style=width:0.5em></span><span class=col-align-c><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:3.2500000000000004em><span style=top:-5.410000000000001em><span class=pstrut style=height:3em></span><span class=mord><span class=mord>2</span></span></span><span style=top:-4.21em><span class=pstrut style=height:3em></span><span class=mord><span class=mord>5</span></span></span><span style=top:-3.01em><span class=pstrut style=height:3em></span><span class=mord><span class=mord>8</span></span></span><span style=top:-1.8099999999999998em><span class=pstrut style=height:3em></span><span class=mord><span class=mord>1</span><span class=mord>1</span></span></span><span style=top:-0.6099999999999997em><span class=pstrut style=height:3em></span><span class=mord><span class=mord>1</span><span class=mord>4</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:2.7500000000000004em></span></span></span></span><span class=arraycolsep style=width:0.5em></span><span class=arraycolsep style=width:0.5em></span><span class=col-align-c><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:3.2500000000000004em><span style=top:-5.410000000000001em><span class=pstrut style=height:3em></span><span class=mord><span class=mord>3</span></span></span><span style=top:-4.21em><span class=pstrut style=height:3em></span><span class=mord><span class=mord>6</span></span></span><span style=top:-3.01em><span class=pstrut style=height:3em></span><span class=mord><span class=mord>9</span></span></span><span style=top:-1.8099999999999998em><span class=pstrut style=height:3em></span><span class=mord><span class=mord>1</span><span class=mord>2</span></span></span><span style=top:-0.6099999999999997em><span class=pstrut style=height:3em></span><span class=mord><span class=mord>1</span><span class=mord>5</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:2.7500000000000004em></span></span></span></span></span></span><span class=mclose><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:3.25004em><span style=top:-1.0499800000000006em><span class=pstrut style=height:3.1550000000000002em></span><span class="delimsizinginner delim-size4"><span>⎠</span></span></span><span style=top:-2.2049900000000004em><span class=pstrut style=height:3.1550000000000002em></span><span class="delimsizinginner delim-size4"><span>⎟</span></span></span><span style=top:-2.805em><span class=pstrut style=height:3.1550000000000002em></span><span class="delimsizinginner delim-size4"><span>⎟</span></span></span><span style=top:-3.4050100000000003em><span class=pstrut style=height:3.1550000000000002em></span><span class="delimsizinginner delim-size4"><span>⎟</span></span></span><span style=top:-4.00502em><span class=pstrut style=height:3.1550000000000002em></span><span class="delimsizinginner delim-size4"><span>⎟</span></span></span><span style=top:-5.250039999999999em><span class=pstrut style=height:3.1550000000000002em></span><span class="delimsizinginner delim-size4"><span>⎞</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:2.75004em></span></span></span></span></span></span><span class="mord rule" style=margin-right:0.16666666666666666em></span><span class=mord>.</span></span></span></span></span><li>Implement the function <code class=highlighter-rouge>write_array</code> in <code class=highlighter-rouge>array.c</code>. It should first write out the number of rows and then columns on the line followed by the data of the array to the file.<li>Test that your code works by making <code class=highlighter-rouge>copyarray</code> (<code class=highlighter-rouge>$ make copyarray</code>) and then trying to copy the array from <code class=highlighter-rouge>small.txt</code> into <code class=highlighter-rouge>copy.txt</code>. <div class=highlighter-rouge><div class=highlight><pre class=highlight><code>$ ./copyarray small.txt copy.txt
</code></pre></div></div><p>Check that the output matches what you expect.<li><p>Implement the missing functionality in <code class=highlighter-rouge>transpose.c</code>. It should take in an array from one file, compute the transpose, and write it out to the second file.<p>The transpose of the small <span class=katex><span class=katex-mathml><math><semantics><mrow><mn>5</mn><mo>×</mo><mn>3</mn></mrow><annotation encoding=application/x-tex>5\times 3</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=strut style=height:0.64444em></span><span class="strut bottom" style=height:0.72777em;vertical-align:-0.08333em></span><span class=base><span class=mord>5</span><span class="mord rule" style=margin-right:0.2222222222222222em></span><span class=mbin>×</span><span class="mord rule" style=margin-right:0.2222222222222222em></span><span class=mord>3</span></span></span></span> array above is the <span class=katex><span class=katex-mathml><math><semantics><mrow><mn>3</mn><mo>×</mo><mn>5</mn></mrow><annotation encoding=application/x-tex>3\times 5</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=strut style=height:0.64444em></span><span class="strut bottom" style=height:0.72777em;vertical-align:-0.08333em></span><span class=base><span class=mord>3</span><span class="mord rule" style=margin-right:0.2222222222222222em></span><span class=mbin>×</span><span class="mord rule" style=margin-right:0.2222222222222222em></span><span class=mord>5</span></span></span></span> array <span class=katex-display><span class=katex><span class=katex-mathml><math><semantics><mrow><mrow><mo fence=true>(</mo><mtable><mtr><mtd><mstyle scriptlevel=0 displaystyle=false><mrow><mn>1</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel=0 displaystyle=false><mrow><mn>4</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel=0 displaystyle=false><mrow><mn>7</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel=0 displaystyle=false><mrow><mn>1</mn><mn>0</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel=0 displaystyle=false><mrow><mn>1</mn><mn>3</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=0 displaystyle=false><mrow><mn>2</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel=0 displaystyle=false><mrow><mn>5</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel=0 displaystyle=false><mrow><mn>8</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel=0 displaystyle=false><mrow><mn>1</mn><mn>1</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel=0 displaystyle=false><mrow><mn>1</mn><mn>4</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=0 displaystyle=false><mrow><mn>3</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel=0 displaystyle=false><mrow><mn>6</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel=0 displaystyle=false><mrow><mn>9</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel=0 displaystyle=false><mrow><mn>1</mn><mn>2</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel=0 displaystyle=false><mrow><mn>1</mn><mn>5</mn></mrow></mstyle></mtd></mtr></mtable><mo fence=true>)</mo></mrow><mi mathvariant=normal>.</mi></mrow><annotation encoding=application/x-tex>\begin{pmatrix}1&amp;4&amp;7&amp;10&amp;13\\2&amp;5&amp;8&amp;11&amp;14\\3&amp;6&amp;9&amp;12&amp;15\end{pmatrix}.</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=strut style=height:2.05002em></span><span class="strut bottom" style=height:3.60004em;vertical-align:-1.55002em></span><span class=base><span class=minner><span class=mopen><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:2.05002em><span style=top:-2.2500000000000004em><span class=pstrut style=height:3.1550000000000002em></span><span class="delimsizinginner delim-size4"><span>⎝</span></span></span><span style=top:-4.05002em><span class=pstrut style=height:3.1550000000000002em></span><span class="delimsizinginner delim-size4"><span>⎛</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:1.55002em></span></span></span></span></span><span class=mord><span class=mtable><span class=col-align-c><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:2.05em><span style=top:-4.21em><span class=pstrut style=height:3em></span><span class=mord><span class=mord>1</span></span></span><span style=top:-3.0099999999999993em><span class=pstrut style=height:3em></span><span class=mord><span class=mord>2</span></span></span><span style=top:-1.8099999999999994em><span class=pstrut style=height:3em></span><span class=mord><span class=mord>3</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:1.5500000000000007em></span></span></span></span><span class=arraycolsep style=width:0.5em></span><span class=arraycolsep style=width:0.5em></span><span class=col-align-c><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:2.05em><span style=top:-4.21em><span class=pstrut style=height:3em></span><span class=mord><span class=mord>4</span></span></span><span style=top:-3.0099999999999993em><span class=pstrut style=height:3em></span><span class=mord><span class=mord>5</span></span></span><span style=top:-1.8099999999999994em><span class=pstrut style=height:3em></span><span class=mord><span class=mord>6</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:1.5500000000000007em></span></span></span></span><span class=arraycolsep style=width:0.5em></span><span class=arraycolsep style=width:0.5em></span><span class=col-align-c><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:2.05em><span style=top:-4.21em><span class=pstrut style=height:3em></span><span class=mord><span class=mord>7</span></span></span><span style=top:-3.0099999999999993em><span class=pstrut style=height:3em></span><span class=mord><span class=mord>8</span></span></span><span style=top:-1.8099999999999994em><span class=pstrut style=height:3em></span><span class=mord><span class=mord>9</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:1.5500000000000007em></span></span></span></span><span class=arraycolsep style=width:0.5em></span><span class=arraycolsep style=width:0.5em></span><span class=col-align-c><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:2.05em><span style=top:-4.21em><span class=pstrut style=height:3em></span><span class=mord><span class=mord>1</span><span class=mord>0</span></span></span><span style=top:-3.0099999999999993em><span class=pstrut style=height:3em></span><span class=mord><span class=mord>1</span><span class=mord>1</span></span></span><span style=top:-1.8099999999999994em><span class=pstrut style=height:3em></span><span class=mord><span class=mord>1</span><span class=mord>2</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:1.5500000000000007em></span></span></span></span><span class=arraycolsep style=width:0.5em></span><span class=arraycolsep style=width:0.5em></span><span class=col-align-c><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:2.05em><span style=top:-4.21em><span class=pstrut style=height:3em></span><span class=mord><span class=mord>1</span><span class=mord>3</span></span></span><span style=top:-3.0099999999999993em><span class=pstrut style=height:3em></span><span class=mord><span class=mord>1</span><span class=mord>4</span></span></span><span style=top:-1.8099999999999994em><span class=pstrut style=height:3em></span><span class=mord><span class=mord>1</span><span class=mord>5</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:1.5500000000000007em></span></span></span></span></span></span><span class=mclose><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:2.05002em><span style=top:-2.2500000000000004em><span class=pstrut style=height:3.1550000000000002em></span><span class="delimsizinginner delim-size4"><span>⎠</span></span></span><span style=top:-4.05002em><span class=pstrut style=height:3.1550000000000002em></span><span class="delimsizinginner delim-size4"><span>⎞</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:1.55002em></span></span></span></span></span></span><span class="mord rule" style=margin-right:0.16666666666666666em></span><span class=mord>.</span></span></span></span></span><li><p>Create a new program <code class=highlighter-rouge>matrixmult</code> (and add it to the <code class=highlighter-rouge>Makefile</code> by adding <code class=highlighter-rouge>matrixmult</code> to the <code class=highlighter-rouge>bins</code> variable) with a corresponding <code class=highlighter-rouge>matrixmult.c</code> This program should take three arguments. The first two should be the paths to files containing arrays and the third is the output file. Compute the <a href=https://en.wikipedia.org/wiki/Matrix_multiplication>matrix multiplication</a> of the two input arrays and write the result to the output file.<p>Note that if you have a <span class=katex><span class=katex-mathml><math><semantics><mrow><mi>k</mi><mo>×</mo><mi>m</mi></mrow><annotation encoding=application/x-tex>k\times m</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=strut style=height:0.69444em></span><span class="strut bottom" style=height:0.77777em;vertical-align:-0.08333em></span><span class=base><span class="mord mathit" style=margin-right:0.03148em>k</span><span class="mord rule" style=margin-right:0.2222222222222222em></span><span class=mbin>×</span><span class="mord rule" style=margin-right:0.2222222222222222em></span><span class="mord mathit">m</span></span></span></span> matrix and a <span class=katex><span class=katex-mathml><math><semantics><mrow><mi>m</mi><mo>×</mo><mi>n</mi></mrow><annotation encoding=application/x-tex>m\times n</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=strut style=height:0.58333em></span><span class="strut bottom" style=height:0.66666em;vertical-align:-0.08333em></span><span class=base><span class="mord mathit">m</span><span class="mord rule" style=margin-right:0.2222222222222222em></span><span class=mbin>×</span><span class="mord rule" style=margin-right:0.2222222222222222em></span><span class="mord mathit">n</span></span></span></span> matrix, then the result of multiplication is a <span class=katex><span class=katex-mathml><math><semantics><mrow><mi>k</mi><mo>×</mo><mi>n</mi></mrow><annotation encoding=application/x-tex>k\times n</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=strut style=height:0.69444em></span><span class="strut bottom" style=height:0.77777em;vertical-align:-0.08333em></span><span class=base><span class="mord mathit" style=margin-right:0.03148em>k</span><span class="mord rule" style=margin-right:0.2222222222222222em></span><span class=mbin>×</span><span class="mord rule" style=margin-right:0.2222222222222222em></span><span class="mord mathit">n</span></span></span></span> matrix. Otherwise, the multiplication isn’t defined.</ol></main>