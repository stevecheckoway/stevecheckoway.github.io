<!DOCTYPE html><html lang=en><meta http-equiv=Content-Type content="text/html;charset=utf-8"> <meta http-equiv=X-UA-Compatible content="IE=edge"> <meta name=viewport content="width=device-width, initial-scale=1"><title>Lecture 15</title><meta name=description content="Lecture 15 – Mar 6th, 2020"> <link rel=canonical href=https://checkoway.net/teaching/cs241/2020-spring/exercises/Lecture-15.html> <link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.9.0/katex.min.css integrity=sha384-TEMocfGvRuD1rIAacqrknm5BQZ7W7uWitoih+jMNFXQIbNl16bO8OZmylH/Vi/Ei crossorigin=anonymous> <link rel=stylesheet href=/css/main.css><main><h1 id=lecture-15--mar-6th-2020>Lecture 15 – Mar 6th, 2020</h1><h2 id=setup>Setup</h2><ol><li>Log in to clyde.<li>Create a directory and <code class="language-plaintext highlighter-rouge">cd</code> into it.<li>Copy <code class="language-plaintext highlighter-rouge">~steve/ex/ptr.c</code> into the directory.</ol><h2 id=task>Task</h2><ol><li>Implement <div class="language-c highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=kt>size_t</span> <span class=nf>simple_strlen</span><span class=p>(</span><span class=kt>char</span> <span class=k>const</span> <span class=o>*</span><span class=n>str</span><span class=p>);</span>
</code></pre></div></div><p>to return the length of the string argument <code class="language-plaintext highlighter-rouge">str</code>, not counting the final <code class="language-plaintext highlighter-rouge">0</code> byte.<p>You will want to loop over each character in the string and check if it is <code class="language-plaintext highlighter-rouge">0</code> or not (note that <code class="language-plaintext highlighter-rouge">0</code> and <code class="language-plaintext highlighter-rouge">'0'</code> are very different). You can do this by checking if <code class="language-plaintext highlighter-rouge">str[length]</code> is <code class="language-plaintext highlighter-rouge">0</code> and if so, return <code class="language-plaintext highlighter-rouge">length</code>. If it isn’t <code class="language-plaintext highlighter-rouge">0</code>, increment <code class="language-plaintext highlighter-rouge">length</code> by one.<p>Alternatively, you can use pointer arithmetic and loop while <code class="language-plaintext highlighter-rouge">*str</code> is not <code class="language-plaintext highlighter-rouge">0</code>. In the body of the loop, increment both <code class="language-plaintext highlighter-rouge">length</code> and <code class="language-plaintext highlighter-rouge">str</code>.<li>The environment variables are available in a variable in <code class="language-plaintext highlighter-rouge">unistd.h</code>. <div class="language-c highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=k>extern</span> <span class=kt>char</span> <span class=o>**</span><span class=n>environ</span><span class=p>;</span>
</code></pre></div></div><p>(Remember that <code class="language-plaintext highlighter-rouge">extern</code> just means it’s defined somewhere else.)<p><code class="language-plaintext highlighter-rouge">environ</code> is a pointer to an array of strings and it ends with a <code class="language-plaintext highlighter-rouge">NULL</code> pointer. That is, <code class="language-plaintext highlighter-rouge">environ[0]</code> is the 0th environment variable, <code class="language-plaintext highlighter-rouge">environ[1]</code> is the 1st, and so on. If there are <em>n</em> environment variables, then <code class="language-plaintext highlighter-rouge">environ[n]</code> is <code class="language-plaintext highlighter-rouge">NULL</code>. The number of environment variables isn’t stored for you.<p>Print out how many environment variables.<p>Your final output should be something like this (but you may have a different number of environment variables).<div class="language-plaintext highlighter-rouge"><div class=highlight><pre class=highlight><code>$ ./ptr foo 'bar baz'
Arg 0 [./ptr] has length 5
Arg 1 [foo] has length 3
Arg 2 [bar baz] has length 7
There are 53 environment variables
</code></pre></div></div></ol></main>