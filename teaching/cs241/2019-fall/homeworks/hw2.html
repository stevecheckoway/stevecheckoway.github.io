<!DOCTYPE html><html lang=en><meta http-equiv=Content-Type content="text/html;charset=utf-8"> <meta http-equiv=X-UA-Compatible content="IE=edge"> <meta name=viewport content="width=device-width, initial-scale=1"><title>Homework 2: Bit by bit</title><meta name=description content="Homework 2: Bit by bit Due: at 23:59"> <link rel=canonical href=https://checkoway.net/teaching/cs241/2019-fall/homeworks/hw2.html> <link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.9.0/katex.min.css integrity=sha384-TEMocfGvRuD1rIAacqrknm5BQZ7W7uWitoih+jMNFXQIbNl16bO8OZmylH/Vi/Ei crossorigin=anonymous> <link rel=stylesheet href=/css/main.css> <script>!function(e,t,a,n,c,o,s){e.GoogleAnalyticsObject=c,e[c]=e[c]||function(){(e[c].q=e[c].q||[]).push(arguments)},e[c].l=1*new Date,o=t.createElement(a),s=t.getElementsByTagName(a)[0],o.async=1,o.src=n,s.parentNode.insertBefore(o,s)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-34500030-2","auto"),ga("send","pageview")</script><main><h1 id=homework-2-bit-by-bit>Homework 2: Bit by bit</h1><p><strong>Due: at 23:59</strong><h2 id=preliminaries>Preliminaries</h2><p>First, find a partner. You’re allowed to work by yourself, but I highly recommend working with a partner. Click on the <a href>assignment link</a>. One partner should create a new team. The second partner should click the link and choose the appropriate team. (Please don’t choose the wrong team, there’s a maximum of two people and if you join the wrong one, you’ll prevent the correct person from joining.)<p>Once you have accepted the assignment and created/joined a team, you can clone the repository on clyde and begin working. But before you do, read the entire assignment and be sure to check out the expected <a href=#coding-style>coding style</a>.<p>Be sure to ask any questions on <a href>Piazza</a>.<h3 id=coding-style>Coding style</h3><p>You should run <code class=highlighter-rouge>clang-format</code> on each of the C source and header files you write. This will format all of your files consistently.<p>If you use NeoVim or Vim as your editor, you can include the line (called a mode line)<div class="language-sh highlighter-rouge"><div class=highlight><pre class=highlight><code>// vim: <span class=nb>set </span><span class=nv>sw</span><span class=o>=</span>2 <span class=nv>sts</span><span class=o>=</span>2 <span class=nv>ts</span><span class=o>=</span>8 et:
</code></pre></div></div><p>at the bottom of each of your files to force Vim to indent by 2 spaces and to ensure that tabs will insert spaces. You can set options in your <code class=highlighter-rouge>~/.vimrc</code> file, creating one if necessary. For example, on clyde, I have the simple <code class=highlighter-rouge>~/.vimrc</code> (note that this is slightly expanded from the one given in the <a href=hw1.html>homework 1</a> write up to set the values for C files).<div class="language-viml highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=k>set</span> background<span class=p>=</span><span class=nb>dark</span>
<span class=k>filetype</span> plugin indent <span class=k>on</span>
autocmd <span class=nb>FileType</span> <span class=k>sh</span> <span class=k>setlocal</span> shiftwidth<span class=p>=</span><span class=m>2</span> softtabstop<span class=p>=</span><span class=m>2</span> tabstop<span class=p>=</span><span class=m>8</span> expandtab
autocmd <span class=nb>FileType</span> <span class=k>c</span> <span class=k>setlocal</span> shiftwidth<span class=p>=</span><span class=m>2</span> softtabstop<span class=p>=</span><span class=m>2</span> tabstop<span class=p>=</span><span class=m>8</span> expandtab
</code></pre></div></div><p>The first line tells Vim to use colors suitable for a terminal with a dark background. The second line tells Vim to use file-type aware indenting. The third line tells Vim to set those options for shell script files. And the fourth line does the same thing, but for C files. See the <a href=https://vim.fandom.com/wiki/Indenting_source_code>Vim wiki</a> for more details.<p>If you use emacs, you’re kind of on your own. Feel free to ask on Piazza, search StackOverflow, and read the <a href=https://www.emacswiki.org/emacs/IndentationBasics>Emacs Wiki</a>.<p>Same with Nano. <a href=https://stackoverflow.com/questions/42584551/how-to-make-auto-indention-in-nano-while-programming-in-python-in-linux>This</a> might be useful.<h3 id=run-time-errors-and-return-values>Run time errors and return values</h3><p>For each of the parts below that ask you to print out an error message, this message should be printed to <code class=highlighter-rouge>stderr</code>. You can use code like this to print to <code class=highlighter-rouge>stderr</code>.<div class="language-c highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=n>fprintf</span><span class=p>(</span><span class=n>stderr</span><span class=p>,</span> <span class=s>"%d is invalid</span><span class=se>\n</span><span class=s>"</span><span class=p>,</span> <span class=n>foo</span><span class=p>);</span>
</code></pre></div></div><p>Any errors should cause the program to exit with a nonzero value (1 is a pretty good choice). Programs that run successfully should exit with value 0. You can use <code class=highlighter-rouge>exit(value)</code> to exit with a particular value. (Read the man page for <code class=highlighter-rouge>exit(3)</code> to see which header you need to include.<p>You can combine these two operations using the <code class=highlighter-rouge>errx(3)</code> function, see the corresponding man page for usage information.<h3 id=code-warnings-and-errors>Code warnings and errors</h3><p>Your code must compile without error or warning when compiled with <code class=highlighter-rouge>-std=c11 -Wall</code>.<h3 id=submission>Submission</h3><p>To submit your homework, you must commit and push to GitHub before the deadline.<p>Your repository should contain the following files<ul><li><code class=highlighter-rouge>README</code><li>TK</ul><p>It may also a <a href=https://git-scm.com/docs/gitignore><code class=highlighter-rouge>.gitignore</code></a> file which tells Git to ignore files matching patterns in your working directory.<p>Any additional files you have added to your repository should be removed from the <code class=highlighter-rouge>master</code> branch. (You’re free to make other branches, if you desire, but make sure <code class=highlighter-rouge>master</code> contains the version of the code you want graded.)<p>The <code class=highlighter-rouge>README</code> should contain<ol><li>The names of both partners (or just your name if you worked alone…but please don’t work alone if you can manage it).<li>An estimate of the amount of time it took to complete each script.<li>Any known bugs or incomplete functions.<li>Any interesting design decisions you’d like to share.</ol><p>Each of your source files with a <code class=highlighter-rouge>main</code> function should contain a comment at the top of the file that contains usage information plus a description of what the program does.<p>Example.<div class="language-c highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=c1>// Usage: ./frequency &lt; input_file</span>
<span class=c1>// </span>
<span class=c1>// The file parameter should be a list of URLs, one per line. Testurl will...</span>
</code></pre></div></div><h2 id=part-1-frequency-analysis>Part 1. Frequency analysis</h2><p>In this part, we will start using arrays to contain frequencies of characters and print a summary of a text’s character distribution.<p>In C, an array is defined as<div class="language-c highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=kt>int</span> <span class=n>arr</span><span class=p>[</span><span class=n>length</span><span class=p>];</span>
</code></pre></div></div><p>where <code class=highlighter-rouge>length</code> is either a variable or a constant. Typically, we will declare a constant like<div class="language-c highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=cp>#define ARRAY_LENGTH 256
</span></code></pre></div></div><p>and use <code class=highlighter-rouge>ARRAY_LENGTH</code> for the length. (You might want to pick a more descriptive name than <code class=highlighter-rouge>ARRAY_LENGTH</code>.)<p>Your assignment is to create a program, <code class=highlighter-rouge>frequency</code>, that computes the count and frequency of all letters a–z.<p>Your program should read characters one at a time from <code class=highlighter-rouge>stdin</code> using the <code class=highlighter-rouge>getchar(3)</code> function until <code class=highlighter-rouge>EOF</code> is returned to indicate the end of file. (Remember, the 3 in <code class=highlighter-rouge>getchar(3)</code> means that the function is described in section 3 of the manual, so <code class=highlighter-rouge>$ man 3 getchar</code>.) Use <code class=highlighter-rouge>isalpha(3)</code> on each character to test if it is a letter a–z or A–Z. If not, ignore the character and move to the next one. If it is a letter, then use <code class=highlighter-rouge>tolower(3)</code> to convert it to lowercase.<p>Use an array of size 26 to hold the count of each character. (Hint, if <code class=highlighter-rouge>c</code> is a lower case character, then <code class=highlighter-rouge>c - 'a'</code> is an integer in the set <span class=katex><span class=katex-mathml><math><semantics><mrow><mo>{</mo><mn>0</mn><mo separator=true>,</mo><mn>1</mn><mo separator=true>,</mo><mo>…</mo><mo separator=true>,</mo><mn>2</mn><mn>5</mn><mo>}</mo></mrow><annotation encoding=application/x-tex>\{0,1,\ldots,25\}</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=strut style=height:0.75em></span><span class="strut bottom" style=height:1em;vertical-align:-0.25em></span><span class=base><span class=mopen>{</span><span class=mord>0</span><span class=mpunct>,</span><span class="mord rule" style=margin-right:0.16666666666666666em></span><span class=mord>1</span><span class=mpunct>,</span><span class="mord rule" style=margin-right:0.16666666666666666em></span><span class=minner>…</span><span class="mord rule" style=margin-right:0.16666666666666666em></span><span class=mpunct>,</span><span class="mord rule" style=margin-right:0.16666666666666666em></span><span class=mord>2</span><span class=mord>5</span><span class=mclose>}</span></span></span></span>.)<p>After all input has been read (so <code class=highlighter-rouge>getchar()</code> returns <code class=highlighter-rouge>EOF</code>), print out, in tabular form, the letter, the number of times that it has appeared (the count), and the percentage of all letters that this letter represents (the frequency).<p>Following this table, print out which is the most frequent and least frequent letter. If there are multiple letters that are most or least frequent, you should print them all out in alphabetical order.<p>Two example runs follow where <code class=highlighter-rouge>hamlet.txt</code> can be downloaded from Project Gutenberg via <code class=highlighter-rouge>$ curl -o hamlet.txt https://www.gutenberg.org/files/1524/1524-0.txt</code>.<div class=highlighter-rouge><div class=highlight><pre class=highlight><code>$ ./frequency &lt;hamlet.txt
Character    Count    Frequency (%)
a            11324            5.527
b             2110            1.030
c             3410            1.664
d             5675            2.770
e            17565            8.573
f             3124            1.525
g             2849            1.391
h             9245            4.512
i            10005            4.883
j              200            0.098
k             1415            0.691
l             6862            3.349
m             4644            2.267
n             9739            4.753
o            12856            6.275
p             2461            1.201
q              230            0.112
r             9139            4.460
s             9449            4.612
t            14065            6.865
u             4983            2.432
v             1347            0.657
w             3425            1.672
x              206            0.101
y             3554            1.735
z              127            0.062
Most frequent: e
Least frequent: z
$ echo 'Hello CSCI 241!' | ./frequency
Character    Count    Frequency (%)
a                0            0.000
b                0            0.000
c                2           12.500
d                0            0.000
e                1            6.250
f                0            0.000
g                0            0.000
h                1            6.250
i                1            6.250
j                0            0.000
k                0            0.000
l                2           12.500
m                0            0.000
n                0            0.000
o                1            6.250
p                0            0.000
q                0            0.000
r                0            0.000
s                1            6.250
t                0            0.000
u                0            0.000
v                0            0.000
w                0            0.000
x                0            0.000
y                0            0.000
z                0            0.000
Most frequent: c l
Least frequent: a b d f g j k m n p q r t u v w x y z
</code></pre></div></div><p>Your output should <em>exactly match</em> the output given above.<p>Make sure your code can handle no letters at all in the input <code class=highlighter-rouge>$ ./frequency &lt;/dev/null</code>. (The counts should be 0 and the frequencies 0.000.)<p>Hints:<ol><li>You may want to use the following call to <code class=highlighter-rouge>printf</code> to produce output in the appropriate form. <div class="language-c highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=n>printf</span><span class=p>(</span><span class=s>"%c         %8d    %13.3f</span><span class=se>\n</span><span class=s>"</span><span class=p>,</span> <span class=n>c</span><span class=p>,</span> <span class=n>count</span><span class=p>,</span> <span class=n>freq</span><span class=p>);</span>
</code></pre></div></div><li>For computing the least frequently occurring character, you may want to use <code class=highlighter-rouge>INT_MAX</code> which is defined in the standard library header <code class=highlighter-rouge>limits.h</code> which is the maximum value an <code class=highlighter-rouge>int</code> can hold.<li>When computing the frequency for a given character that appeared <code class=highlighter-rouge>count</code> times, you’ll want to compute <code class=highlighter-rouge>100.0 * count / total</code> where <code class=highlighter-rouge>total</code> is the total number of <em>letters</em> in the input, not the total number of characters.</ol><h2 id=part-2-convert-to-binary-and-back>Part 2. Convert to binary and back</h2><p>In this part, you will be creating 2 programs. <code class=highlighter-rouge>encode_bits</code> which will generate the “binary” representation of a file and <code class=highlighter-rouge>decode_bits</code> which will take that representation and convert it back to the original format.<dl><dt><code class=highlighter-rouge>encode_bits</code><dd>Create a program called <code class=highlighter-rouge>encode_bits</code>. This program should use <code class=highlighter-rouge>getchar(3)</code> to read in characters one at a time and then call <code class=highlighter-rouge>print_bits()</code> (see below) to output that character as a sequence of ‘1’ and ‘0’ characters. It should stop on <code class=highlighter-rouge>EOF</code>. <p>After all characters have been sent to <code class=highlighter-rouge>print_bits()</code>, output a newline. Together with <code class=highlighter-rouge>print_bits()</code>, this should ensure that every line of output ends with a newline and that every line of output will contain 70 <code class=highlighter-rouge>0</code> or <code class=highlighter-rouge>1</code> characters (except for the last line which may contain fewer).<dt><code class=highlighter-rouge>decode_bits</code><dd>Create a program called <code class=highlighter-rouge>decode_bits</code>. This program should use <code class=highlighter-rouge>getchar(3)</code> to read in characters one at a time and then call <code class=highlighter-rouge>decode_bits()</code> (see below) to output that sequence of ‘1’ and ‘0’ characters as actual characters. It should stop on <code class=highlighter-rouge>EOF</code>.<dt><code class=highlighter-rouge>bits.c</code> and <code class=highlighter-rouge>bits.h</code><dd>Create a file called <code class=highlighter-rouge>bits.c</code> that contains the definitions of the two functions described below and a header file <code class=highlighter-rouge>bits.h</code> that contains a guard against multiple inclusion and function prototypes. <div class="language-c highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=kt>void</span> <span class=n>print_bits</span><span class=p>(</span><span class=kt>int</span> <span class=n>ch</span><span class=p>)</span>
</code></pre></div></div><ul><li>Takes the character ch and outputs its value in binary format with all leading zeros and with the MSB first. For example, the letter <code class=highlighter-rouge>A</code> has a value of 0x41, and should be output as <code class=highlighter-rouge>01000001</code>. A newline character has a value of 0x0a and should be output as <code class=highlighter-rouge>00001010</code>.<li>You should not assume the number of bits that are in a char, instead use the constant <code class=highlighter-rouge>CHAR_BIT</code> from the standard library header <code class=highlighter-rouge>limits.h</code>.<li>While printing the bits, if the current line of output has 70 characters (one per bit printed by <code class=highlighter-rouge>print_bits()</code>), print a newline before printing the next <code class=highlighter-rouge>0</code> or <code class=highlighter-rouge>1</code>.</ul><div class="language-c highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=kt>void</span> <span class=n>decode_bits</span><span class=p>(</span><span class=kt>int</span> <span class=n>ch</span><span class=p>)</span>
</code></pre></div></div><ul><li>If the character is whitespace, skip it. (You might want to use <code class=highlighter-rouge>isspace(3)</code>.)<li>If the character is a <code class=highlighter-rouge>1</code> or a <code class=highlighter-rouge>0</code>, you should add it into a global variable (numerically, shifting the current contents appropriately). Once you’ve seen <code class=highlighter-rouge>CHAR_BIT</code> bits, you should print the corresponding character out.<li>If the character is not white space and not <code class=highlighter-rouge>0</code> or <code class=highlighter-rouge>1</code>, you should print an error message to <code class=highlighter-rouge>stderr</code>, and exit with a nonzero value (see the instructions at the top of the write up about error messages).</ul></dl><p>Here is some sample output.<div class=highlighter-rouge><div class=highlight><pre class=highlight><code>$ echo "Printing bit by bit" | ./encode_bits
0101000001110010011010010110111001110100011010010110111001100111001000
0001100010011010010111010000100000011000100111100100100000011000100110
10010111010000001010
$ echo "Printing bit by bit" | ./encode_bits | ./decode_bits
Printing bit by bit
$ echo "bad input!" | ./decode_bits
decode_bits: Character 'b' is not '0' or '1'
$ echo $?
1
</code></pre></div></div><p>Hints:<ol><li>You’ll probably want to use static local variables in both <code class=highlighter-rouge>print_bits()</code> and <code class=highlighter-rouge>decode_bits()</code> to decide when to print newlines (<code class=highlighter-rouge>print_bits()</code>) or the character (<code class=highlighter-rouge>decode_bits()</code>).<li>Make sure <code class=highlighter-rouge>encode_bits</code> doesn’t start by outputting a newline or end with a blank line (unless the input was empty).</ol><h2 id=part-3-base-conversion>Part 3. Base conversion</h2></main>