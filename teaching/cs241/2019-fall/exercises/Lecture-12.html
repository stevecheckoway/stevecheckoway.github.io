<!DOCTYPE html><html lang=en><meta http-equiv=Content-Type content="text/html;charset=utf-8"> <meta http-equiv=X-UA-Compatible content="IE=edge"> <meta name=viewport content="width=device-width, initial-scale=1"><title>Lecture 12</title><meta name=description content="Lecture 12 – Sep 30th, 2019"> <link rel=canonical href=https://checkoway.net/teaching/cs241/2019-fall/exercises/Lecture-12.html> <link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.9.0/katex.min.css integrity=sha384-TEMocfGvRuD1rIAacqrknm5BQZ7W7uWitoih+jMNFXQIbNl16bO8OZmylH/Vi/Ei crossorigin=anonymous> <link rel=stylesheet href=/css/main.css><main><h1 id=lecture-12--sep-30th-2019>Lecture 12 – Sep 30th, 2019</h1><h2 id=setup>Setup</h2><ol><li>Log in to clyde.<li>Create a directory and <code class=highlighter-rouge>cd</code> into it.<li>Copy <code class=highlighter-rouge>~steve/ex/parse_int.c</code> into the directory.</ol><h2 id=task>Task</h2><ol><li>Read through <code class=highlighter-rouge>parse_int.c</code> and try to understand what it is doing. Looking at the man page for <code class=highlighter-rouge>getchar(3)</code> and <code class=highlighter-rouge>isdigit(3)</code> is going to be helpful.<li>Compile <code class=highlighter-rouge>parse_int</code> and run it. It’s expecting input from <code class=highlighter-rouge>stdin</code>, so you can either type into the terminal while it’s running. It’ll receive input one line at a time so be sure to hit return/enter and if you want to signal the end of the input, press control-d (on an otherwise blank line). You can also run <code class=highlighter-rouge>$ echo 12345 | ./parse_int</code>.<li>Edit <code class=highlighter-rouge>parse_int.c</code> and change <code class=highlighter-rouge>num_value</code> so that it returns <code class=highlighter-rouge>0</code> on input <code class=highlighter-rouge>'0'</code>, <code class=highlighter-rouge>1</code> on input <code class=highlighter-rouge>'1'</code>, and so on up to <code class=highlighter-rouge>9</code> on input ‘<code class=highlighter-rouge>9</code>’. You can assume the input is in ASCII (take a look at the <code class=highlighter-rouge>ascii(7)</code> man page for handy tables of values) and in particular, ‘0’–‘9’ are consecutive values. Thus <code class=highlighter-rouge>ch - '0'</code> is probably useful to you.<li>Modify the behavior of <code class=highlighter-rouge>parse_int.c</code> so that it reads a positive integer (in decimal) one character at a time (until a non-digit is read). Print out the value of the integer times 7. <div class=highlighter-rouge><div class=highlight><pre class=highlight><code>$ echo 0 | ./parse_int
0 * 7 = 0
$ echo 1 | ./parse_int
1 * 7 = 7
$ echo 12345 | ./parse_int
12345 * 7 = 86415
</code></pre></div></div><p>Recall, <span class=katex><span class=katex-mathml><math><semantics><mrow><mn>5</mn><mn>3</mn><mn>9</mn></mrow><annotation encoding=application/x-tex>539</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=strut style=height:0.64444em></span><span class="strut bottom" style=height:0.64444em;vertical-align:0em></span><span class=base><span class=mord>5</span><span class=mord>3</span><span class=mord>9</span></span></span></span> means <span class=katex-display><span class=katex><span class=katex-mathml><math><semantics><mrow><mn>5</mn><mo>⋅</mo><mn>1</mn><msup><mn>0</mn><mn>2</mn></msup><mo>+</mo><mn>3</mn><mo>⋅</mo><mn>1</mn><msup><mn>0</mn><mn>1</mn></msup><mo>+</mo><mn>9</mn><mo>⋅</mo><mn>1</mn><msup><mn>0</mn><mn>0</mn></msup><mo>=</mo><mo>(</mo><mn>5</mn><mo>⋅</mo><mn>1</mn><msup><mn>0</mn><mn>1</mn></msup><mo>+</mo><mn>3</mn><mo>⋅</mo><mn>1</mn><msup><mn>0</mn><mn>0</mn></msup><mo>)</mo><mo>⋅</mo><mn>1</mn><mn>0</mn><mo>+</mo><mn>9</mn><mi mathvariant=normal>.</mi></mrow><annotation encoding=application/x-tex>5\cdot10^2 + 3\cdot10^1 + 9\cdot10^0 = (5\cdot10^1 + 3\cdot10^0)\cdot10 + 9.</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=strut style=height:0.8641079999999999em></span><span class="strut bottom" style=height:1.1141079999999999em;vertical-align:-0.25em></span><span class=base><span class=mord>5</span><span class="mord rule" style=margin-right:0.2222222222222222em></span><span class=mbin>⋅</span><span class="mord rule" style=margin-right:0.2222222222222222em></span><span class=mord>1</span><span class=mord><span class=mord>0</span><span class=msupsub><span class=vlist-t><span class=vlist-r><span class=vlist style=height:0.8641079999999999em><span style=top:-3.113em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mord rule" style=margin-right:0.2222222222222222em></span><span class=mbin>+</span><span class="mord rule" style=margin-right:0.2222222222222222em></span><span class=mord>3</span><span class="mord rule" style=margin-right:0.2222222222222222em></span><span class=mbin>⋅</span><span class="mord rule" style=margin-right:0.2222222222222222em></span><span class=mord>1</span><span class=mord><span class=mord>0</span><span class=msupsub><span class=vlist-t><span class=vlist-r><span class=vlist style=height:0.8641079999999999em><span style=top:-3.113em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span></span></span></span></span><span class="mord rule" style=margin-right:0.2222222222222222em></span><span class=mbin>+</span><span class="mord rule" style=margin-right:0.2222222222222222em></span><span class=mord>9</span><span class="mord rule" style=margin-right:0.2222222222222222em></span><span class=mbin>⋅</span><span class="mord rule" style=margin-right:0.2222222222222222em></span><span class=mord>1</span><span class=mord><span class=mord>0</span><span class=msupsub><span class=vlist-t><span class=vlist-r><span class=vlist style=height:0.8641079999999999em><span style=top:-3.113em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span></span></span></span></span><span class="mord rule" style=margin-right:0.2777777777777778em></span><span class=mrel>=</span><span class="mord rule" style=margin-right:0.2777777777777778em></span><span class=mopen>(</span><span class=mord>5</span><span class="mord rule" style=margin-right:0.2222222222222222em></span><span class=mbin>⋅</span><span class="mord rule" style=margin-right:0.2222222222222222em></span><span class=mord>1</span><span class=mord><span class=mord>0</span><span class=msupsub><span class=vlist-t><span class=vlist-r><span class=vlist style=height:0.8641079999999999em><span style=top:-3.113em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span></span></span></span></span><span class="mord rule" style=margin-right:0.2222222222222222em></span><span class=mbin>+</span><span class="mord rule" style=margin-right:0.2222222222222222em></span><span class=mord>3</span><span class="mord rule" style=margin-right:0.2222222222222222em></span><span class=mbin>⋅</span><span class="mord rule" style=margin-right:0.2222222222222222em></span><span class=mord>1</span><span class=mord><span class=mord>0</span><span class=msupsub><span class=vlist-t><span class=vlist-r><span class=vlist style=height:0.8641079999999999em><span style=top:-3.113em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span></span></span></span></span><span class=mclose>)</span><span class="mord rule" style=margin-right:0.2222222222222222em></span><span class=mbin>⋅</span><span class="mord rule" style=margin-right:0.2222222222222222em></span><span class=mord>1</span><span class=mord>0</span><span class="mord rule" style=margin-right:0.2222222222222222em></span><span class=mbin>+</span><span class="mord rule" style=margin-right:0.2222222222222222em></span><span class=mord>9</span><span class=mord>.</span></span></span></span></span> But notice that the number in the parentheses is just <span class=katex><span class=katex-mathml><math><semantics><mrow><mn>5</mn><mn>3</mn></mrow><annotation encoding=application/x-tex>53</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=strut style=height:0.64444em></span><span class="strut bottom" style=height:0.64444em;vertical-align:0em></span><span class=base><span class=mord>5</span><span class=mord>3</span></span></span></span>. Therefore, if <code class=highlighter-rouge>val</code> is our current value, then after reading in another digit, we need to multiply <code class=highlighter-rouge>val</code> by 10 and add the value of the digit.<li>Modify the behavior of <code class=highlighter-rouge>parse_int.c</code> again so that instead of reading just one integer, it reads two integers, separated by a <code class=highlighter-rouge>+</code>, adds them together, and prints out the result. <div class=highlighter-rouge><div class=highlight><pre class=highlight><code>$ echo 32527+1256289 | ./parse_int
32527 + 1256289 = 1288816
</code></pre></div></div><li>Modify <code class=highlighter-rouge>parse_int.c</code> one more time so that if the two numbers are separated by <code class=highlighter-rouge>+</code>, it adds them; by <code class=highlighter-rouge>-</code>, it subtracts the second from the first; by <code class=highlighter-rouge>*</code>, it multiples them; and by <code class=highlighter-rouge>/</code>, it divides the first by the second. What happens if you try to divide by 0? Handle that gracefully.</ol></main>