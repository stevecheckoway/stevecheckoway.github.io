<!DOCTYPE html><html lang=en><meta http-equiv=Content-Type content="text/html;charset=utf-8"> <meta http-equiv=X-UA-Compatible content="IE=edge"> <meta name=viewport content="width=device-width, initial-scale=1"><title>Lecture 20</title><meta name=description content="Lecture 20 – Oct 28th, 2019"> <link rel=canonical href=https://checkoway.net/teaching/cs241/2019-fall/exercises/Lecture-21.html> <link rel=stylesheet href=/css/main.css><main><h1 id=lecture-20--oct-28th-2019>Lecture 20 – Oct 28th, 2019</h1><h2 id=setup>Setup</h2><ol><li>Log in to clyde.<li><code class="language-plaintext highlighter-rouge">$ cp -r ~steve/ex/streams .</code></ol><h2 id=task>Task</h2><ol><li><p>Finish implementing <code class="language-plaintext highlighter-rouge">tobin.c</code> such that it reads integers (separated by spaces) from <code class="language-plaintext highlighter-rouge">stdin</code> using <code class="language-plaintext highlighter-rouge">scanf(3)</code> one at a time and then writes them to the file whose path is the first argument to <code class="language-plaintext highlighter-rouge">tobin</code>. (See <code class="language-plaintext highlighter-rouge">tobin.c</code> for more details.)<p>We can use <code class="language-plaintext highlighter-rouge">xxd(1)</code> which prints out each byte in hex to examine our result.<div class="language-plaintext highlighter-rouge"><div class=highlight><pre class=highlight><code>$ ./tobin output
1 2 3 4 X
$ xxd output
00000000: 0100 0000 0200 0000 0300 0000 0400 0000  ................
</code></pre></div></div><p>Notice that it wrote it out in little-endian. I.e., the integer <code class="language-plaintext highlighter-rouge">0x00000001</code> became the four bytes <code class="language-plaintext highlighter-rouge">01 00 00 00</code>.<p>Try giving the input <code class="language-plaintext highlighter-rouge">1819043144 1396908143 170996786 X</code> to <code class="language-plaintext highlighter-rouge">tobin</code> and take a look at the resulting file.<li><p>Finish implementing <code class="language-plaintext highlighter-rouge">double.c</code> that reads the file whose path is the first argument to <code class="language-plaintext highlighter-rouge">double</code>. The goal is to read in all of the integers, from the file, double them, and then write them back to the file. (See <code class="language-plaintext highlighter-rouge">double.c</code> for more details.)<div class="language-plaintext highlighter-rouge"><div class=highlight><pre class=highlight><code>$ ./double output
$ xxd output
00000000: 0100 0000 0200 0000 0300 0000 0400 0000  ................
</code></pre></div></div><li><p>Finish implementing <code class="language-plaintext highlighter-rouge">frombin.c</code> which reads integers one at a time from a file and prints them to <code class="language-plaintext highlighter-rouge">stdout</code>, one per line.<div class="language-plaintext highlighter-rouge"><div class=highlight><pre class=highlight><code>$ ./frombin output
2
4
6
8
</code></pre></div></div><li><p>Modify your implementation of <code class="language-plaintext highlighter-rouge">frombin.c</code> to first get the file size, then allocate an array of integers long enough to hold the whole file, and then read everything in with a single call to <code class="language-plaintext highlighter-rouge">fread(3)</code>.</ol></main>